<!doctype html>
<html>
  <head>
    <link href="style.css" rel="stylesheet" />
    <link href="table.css" rel="stylesheet" />
  </head>

  <body>
    <a href="https://github.com/saliherdemk/Grada" target="blank">
      <img src="media/githubLogo.png" alt="" id="github-icon" />
    </a>

    <div id="welcome-container" onclick="toggleWelcome()">
      <div id="popup-container">
        <h3>Grada</h3>
        <img id="demo-img" src="media/demo.png" />

        <div>
          Grada is an interactive tool that lets you observe real-time changes
          as you train a multilayer perceptron.
        </div>

        <div class="tips">
          <div>Double-click on a layer to edit it.</div>
          <div>
            You can create or import datasets and apply flattening, min-max
            normalization, and one-hot encoding operations.
          </div>
          <div>Double-click on the MLP to edit its properties.</div>
          <div>
            You can evaluate a model by connecting an input component, but to
            train it, you'll also need to add an output component.
          </div>
          <div>
            <span class="c-blue">Blue</span> represents neuron biases. <br />
            <span class="c-cyan">Cyan</span> represents bias gradients.
          </div>
          <div>
            In input and output layers,
            <span class="c-yellow">yellow</span> represents fetched data, and
            <span class="c-green">green</span> represents executed data.
          </div>
        </div>
      </div>
    </div>

    <img id="tip-button" src="media/tip.png" alt="" onclick="toggleWelcome()" />

    <div id="mlp-edit-container">
      <div>
        <label for="mlp-label">Name</label><br />
        <input id="mlp-label" type="text" value="" />
      </div>

      <div>
        <label for="mlp-lr">Learning Rate</label> <br />
        <input id="mlp-lr" type="range" step="0.001" max="1" min="0" /> <br />
        <input id="mlp-lr-number" type="number" step="0.001" />
      </div>

      <div>
        <label for="mlp-batch-size">Batch Size</label><br />
        <input id="mlp-batch-size" type="range" value="" max="128" min="1" />
      </div>

      <div class="flex-center">
        Error Func:
        <select id="err-function-select" class="inp"></select>
      </div>

      <div>
        <div id="mlp-mode">
          Mode:
          <input type="radio" id="mode-eval" name="mlp-mode" value="eval" />
          <label for="mode-eval">eval</label>

          <input type="radio" id="mode-train" name="mlp-mode" value="train" />
          <label for="mode-train">train</label>
        </div>
      </div>

      <div>
        <div id="mlp-zen-mode">
          Zen:
          <input type="radio" id="zen-true" name="mlp-zen" value="true" />
          <label for="zen-true">opened</label>

          <input type="radio" id="zen-false" name="mlp-zen" value="false" />
          <label for="zen-false">closed</label>
        </div>
      </div>

      <button id="toggle-mlp-props" class="btn btn-cyan" type="button">
        Hide Props
      </button>

      <button id="mlp-reset-btn" class="btn btn-yellow" type="button">
        Reset Coordinates
      </button>
      <button id="mlp-export-btn" class="btn btn-yellow" type="button">
        Export
      </button>

      <button id="mlp-delete-btn" class="btn btn-rose" type="button">
        Delete
      </button>

      <img
        id="mlp-layer-close"
        class="cancel-icon"
        src="media/close.png"
        alt=""
        width="20"
        height="20"
      />
    </div>
    <div id="disable-background">
      <div id="canvas-parent">
        <div id="edit-panel">
          <div id="layer-settings-container">
            <div class="flex-center">
              Layer name:
              <input id="label-input" class="inp" type="" name="" value="" />
            </div>
            <div class="flex-center">
              Act Func:
              <select id="act-function-select" class="inp">
                <option value="" selected>None</option>
              </select>
            </div>
          </div>
          <div class="layer-controls-grid">
            <div id="info-message-container">
              Layer will be display with
              <span id="info-message"></span> neurons <br />
            </div>

            <div class="grid-item">
              <span>Number of shown neurons: </span>

              <input id="set-shown-neuron" type="range" min="1" max="100" />

              <input
                class="inp"
                id="shown-neuron-inp"
                type="text"
                maxlength="4"
              />
            </div>

            <div class="grid-item">
              <span>Number of neurons: </span>
              <input
                class="inp"
                id="set-neuron-num"
                type="text"
                maxlength="4"
              />
              <button class="btn btn-cyan grid-item" id="toggle-shrink-btn">
                Expanded
              </button>

              <button
                class="btn btn-blue grid-item"
                id="save-btn"
                type="button"
              >
                Save
              </button>
            </div>
          </div>

          <img
            id="edit-layer-close"
            class="cancel-icon"
            src="media/close.png"
            alt=""
            width="25"
            height="25"
          />
        </div>
      </div>

      <div id="create-dataset-container">
        <div class="flex-end">
          <img
            id="create-dataset-close"
            class="cancel-icon"
            src="media/close.png"
            alt=""
            width="25"
            height="25"
            onclick="closeCreateDataset()"
          />
        </div>
        <div id="scrollable-container"></div>
        <div id="edit-dataset-container">
          <div>
            Name:
            <input class="inp" id="edit-dataset-name" type="text" value="" />
          </div>
          <br />

          <div class="edit-dataset-grid-container">
            <div class="edit-dataset-grid-item">
              xData Shape: <span id="x-shape"></span>
            </div>
            <button class="btn btn-blue" id="flat-btn">Flatten</button>
            <button class="btn btn-blue" id="min-max-btn">
              min-max Normalization
            </button>

            <div></div>
            <div id="flat-progress-bar"></div>
            <div id="normalize-progress-bar"></div>

            <div class="edit-dataset-grid-item">
              yData Shape: <span id="y-shape"></span>
            </div>
            <button class="btn btn-blue" id="one-hot-encode-btn">
              One hot Encode
            </button>
            <div></div>

            <div></div>
            <div id="onehot-progress-bar" class="progress-bar"></div>
            <div></div>
          </div>
        </div>
        <div id="import-dataset-container">
          <label id="import-dataset" for="import-dataset-inp">
            <img src="./media/upload.png" alt="" width="100" height="100" />
            Import Dataset
          </label>
          <input type="file" id="import-dataset-inp" accept=".json" />
          <button id="mnist-train-button" class="btn btn-cyan">
            Continue with MNIST
          </button>
          <button id="mnist-eval-button" class="btn btn-cyan">
            Continue with eval MNIST
          </button>
        </div>
        <div class="flex-between">
          <input
            type="checkbox"
            class="dataset-checkbox"
            id="chk"
            onchange="toggleDatasetMode()"
          />
          <label class="label" for="chk">
            <div class="ball"></div>
          </label>
          <div class="flex-center gap-10">
            <button id="download-dataset-btn" class="btn btn-blue">
              Download
            </button>
            <button id="create-dataset-btn" class="btn btn-blue">Create</button>
          </div>
        </div>
      </div>
    </div>

    <div class="control-container">
      <div id="toggle-dataset-container">
        <img
          id="toggle-dataset-btn"
          src="media/arrow.svg"
          onclick="toggleDatasetsContainer()"
          alt=""
        />
      </div>
      <div
        id="datasets-container"
        class="active"
        onmouseover="disableCanvas()"
        onmouseout="enableCanvas()"
      >
        <div>Datasets</div>
        <div id="dataset-scrollable"></div>
        <button onclick="openCreateDataset()" class="btn btn-sky">
          Create Dataset
        </button>
        <button
          id="add-layer"
          type="button"
          class="btn btn-yellow"
          onclick="createHandWrittenInput()"
        >
          HandWritten Input
        </button>
        <button
          id="add-layer"
          type="button"
          class="btn btn-green"
          onclick="createLayer()"
        >
          Add Layer
        </button>
        <button
          class="btn btn-cyan"
          id="import-mlp-btn"
          onclick="triggerImportMlpInput()"
        >
          Import MLP
        </button>
        <input
          type="file"
          id="import-mlp-input"
          oninput="readMLPFile(event)"
          accept=".json"
          class="hidden"
        />
      </div>
    </div>

    <!-- <button onclick="logMLPs()" type="">Log Mlps</button> -->

    <script src="js/p5.min.js"></script>

    <script src="js/helpers.js"></script>
    <script src="js/script.js"></script>

    <script src="js/Workers/flattenWorker.js"></script>
    <script src="js/Workers/getMinMaxWorker.js"></script>
    <script src="js/Workers/oneHotWorker.js"></script>
    <script src="js/Workers/minMaxNormalizeWorker.js"></script>
    <script src="js/Workers/DataProcessor.js"></script>

    <script src="js/Managers/themeManager.js"></script>
    <script src="js/Managers/canvasManager.js"></script>
    <script src="js/Managers/interactionManager.js"></script>
    <script src="js/Managers/eventManager.js"></script>
    <script src="js/Managers/activationFunctionManager.js"></script>
    <script src="js/Managers/errorFunctionManager.js"></script>

    <script src="js/Organizers/Table/FunctionalTable.js"></script>
    <script src="js/Organizers/Table/tableOrganizer.js"></script>

    <script src="js/Organizers/datasetOrganizer.js"></script>
    <script src="js/Organizers/mainOrganizer.js"></script>
    <script src="js/Organizers/editOrganizer.js"></script>
    <script src="js/Organizers/editLayerOrganizer.js"></script>
    <script src="js/Organizers/editMlpOrganizer.js"></script>

    <script src="js/MLP/Tensor.js"></script>

    <script src="js/MLP/Dataset.js"></script>
    <script src="js/MLP/DenseLayer.js"></script>
    <script src="js/MLP/MlpParams.js"></script>
    <script src="js/MLP/Mlp.js"></script>

    <script src="js/draggable.js"></script>

    <script src="js/Draw/Minors/LoadingIndicator.js"></script>
    <script src="js/Draw/Minors/Buttons/CanvasButton.js"></script>
    <script src="js/Draw/Minors/Buttons/ImageButton.js"></script>
    <script src="js/Draw/Minors/Buttons/TextButton.js"></script>
    <script src="js/Draw/Minors/Dot/Dot.js"></script>
    <script src="js/Draw/Minors/Dot/LayerDot.js"></script>
    <script src="js/Draw/Minors/Dot/CalculationDot.js"></script>
    <script src="js/Draw/Minors/Dot/LossGraphDot.js"></script>
    <script src="js/Draw/Minors/WeightlessLine.js"></script>
    <script src="js/Draw/Minors/Line.js"></script>
    <script src="js/Draw/Minors/Viewers/Viewer.js"></script>
    <script src="js/Draw/Minors/Viewers/CalculationViewer.js"></script>
    <script src="js/Draw/Minors/Viewers/GraphViewer.js"></script>

    <script src="js/Draw/Layer/BaseLayers/LayerView.js"></script>
    <script src="js/Draw/Layer/BaseLayers/FunctionalLayerView.js"></script>
    <script src="js/Draw/Layer/BaseLayers/Component.js"></script>
    <script src="js/Draw/Layer/HiddenLayer.js"></script>
    <script src="js/Draw/Layer/CopyLayer.js"></script>
    <script src="js/Draw/Layer/BaseLayers/IOLayer.js"></script>
    <script src="js/Draw/Layer/InputLayer.js"></script>
    <script src="js/Draw/Layer/OutputLayer.js"></script>

    <script src="js/HandWritten/DigitInputGrid.js"></script>
    <script src="js/HandWritten/DigitComponent.js"></script>

    <script src="js/Draw/NeuronView.js"></script>

    <script src="js/Draw/MLP/Playable.js"></script>
    <script src="js/Draw/MLP/MLPView.js"></script>

    <script src="js/canvas.js"></script>
  </body>
</html>
